service cloud.firestore {
  match /databases/{database}/documents {
    match /rooms/{room} {
    	allow create, get: if true;
      allow update: if request.resource.data.createdAt == resource.data.createdAt &&
      	request.resource.data.isPlaying is bool &&
        request.resource.data.owner == resource.data.owner &&
        request.resource.data.playlistId == resource.data.playlistId &&
        request.resource.data.title == resource.data.title;
        
      match /queue/{track} {
      	allow read, create: if true;
        allow update: if request.resource.data.artist == resource.data.artist &&
          request.resource.data.createdAt == resource.data.createdAt &&
          request.resource.data.image == resource.data.image &&
          request.resource.data.score is int &&
          request.resource.data.title == resource.data.title &&
          request.resource.data.uri == resource.data.uri &&
          request.resource.data.user == resource.data.user;
        allow delete: if true;
      }
    }

    match /users/{user} {
      match /rooms/{room} {
        match/votes/{vote} {
          allow read, write: if true;
        }
      }
    }
  }
}